



Curs 5 SO - Gestiunea memoriei


Cuvinte cheie: accesarea memoriei, adresarea memoriei, succesiune de adrese, partitionarea memoriei, protectia accesului, alocarea/ dealocarea memoriei, partajarea memoriei, framentarea, translatarea adreselor virtuale, suport hardware MMU, TLB, interactiunea cu alte subsisteme


Ierarhie memorie - 


Memoria Principala ----- RAM, volatila nepersistenta
cache pentru disc, lenta comparativ cu procesorul si rapida comparativ cu discul



Memoria cache - intrea procesor si ram

Este accessata de procsor inainte de mem ram
Cache hit/miss ratio
In caz de miss se aloca/inlocueste o intrare cu noua informatie
De avut in vedere sincronizarea cache ului pe multi procesor



Spatiu de memorie - fiecare proces are asociat un spatiu de memorie nucleul avand un spatiu propriu, in general 1GB
Este un spatiu de adrese valide ce pot fi accesate de un proces.
Trebuie protejat accesul la spatiul de memorie al nucleului si al proceselor intre ele.






Adrese si date - adresele sunt date de dimensiunea magistralei de adrese, accesare a maxim 2 la N octeti
( N dim magistrala), IP instruction pointer, PC program counter.
Adresa refera un octet din memorie
In general citirea se face la nivel de cuvant, adica 4 octeti pe o arhitectura de 32 de biti
Datele se transmit pe magistrala de date




Arhitecturi  load/store   vs   pe register memory
L/S - operatii load store pentru operatii intre registre
Operanzii sunt adusi, Load in registre
Rezultatul trebuie transmis Store in memorie

Reg memory - operatii move pentru comunicare registre-memorie
Operanzii pot fi stocati fie in registre fie in memorie





Address binding 

CPU  ----  logical adress  ---- limit register  ----  relocation register ----  physical address
------  memory



Adresa logica -  adresa generata de procesor, este o adresa virtuala



Adresa fizica - este o adresa folosita de unitatea de memorie

La executie se transforma adresa logica in adresa fizica. CU ajutorul MMU


Alocare  - 
Alogarea contigua  ---  fiecare proces rezida intr-o sectiune contigua de memorie, folosirea unui registru de relocare si a unui registru limita.
Pros n cons : simplu de implementat DAR trebuie sa stii de la inceput cat are nevoie un proces si
posibil sa nu fie locuri libere

Algoritmi de alocare :  first first



Fragmentare  -  este spatiu liber care nu poate fi folosit pentru noi alocari
Fragmentare externa - spatiul ramas liber intre doua blocuri, nu este contigua
Fragmentare interna - spatiu ramas in interiorul unui bloc care nu poate fi folosit nici de el nici 
de altii
Solutii -- compactarea blocurilor sau folosirea de spatii non contigue





Paginare  -  spatiu de memorie impartit in pagini de dimensiune fixa, alocarea nu este contigua si 
astfel nu exista problema fragmentarii externe. o schema de memory management
7. Every address generated by the CPU is divided into two parts: a page number (p) and a
page offset (d). The page number is used as an index into a page table
The
page table contains the base address of each page in physical memory.This
base address is combined with the page offset to define the physical memory
address that is sent to the memory






Segmentare -  partitionarea memoriei in segmente  care au o baza si o limita
Un proces poate avea mai multe segmente, segmentele au dimensiune variabila si au protectie.

Segmentation is a memory-management scheme that supports this user
view of memory. A logical address space is a collection of segments. Each
segment has a name and a length. The addresses specify both the segment name
and the offset within the segment
The user therefore specifies each address
by two quantities: a segment name and an offset. (Contrast this scheme with
the paging scheme, in which the user specifies only a single address, which is
partitioned by the hardware into a page number and an offset, all invisible to
the programmer







Selector segment




Adresa liniara





Pagina virtuala



Pagina fizica  frames



Tabela de pagini



MMU - memory management unit
Mapare intre adrese virtuale - adrese fizice.


TLB  -  translation lookaside buffer
a special, small, fastlookup
hardware cache, called a translation look-aside buffer (TLB). The TLB
is associative, high-speed memory. Each entry in the TLB consists of two parts:
a key (or tag) and a value. When the associative memory is presented with an
item, the item is compared with all keys simultaneously. If the item is found,
the corresponding value field is returned


Paginare ierarhica




Tabela de pagini inversata

An inverted
page table has one entry for each real page (or frame) of memory. Each entry
consists of the virtual address of the page stored in that real memory location,
with information about the process that owns the page

